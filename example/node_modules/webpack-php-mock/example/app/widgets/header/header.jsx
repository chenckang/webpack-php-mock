import React from 'react';
import {Link} from 'react-router';
import {Navbar} from 'react-bootstrap';
import './header.less';

class Header extends React.Component {
    constructor(props, context) {
        super(props);
    }

    getActive(name) {
        if (this.props.params) {
            if (this.props.params.widget === name) {
                return 'active';
            }
            if (!this.props.params.widget && 'shopcost' === name) {
                return 'active';
            }
        }
        return '';
    }

    render () {
        return (
            <header id="header" className="navbar navbar-default navbar-fixed-top">
                <div className="container-header">
                    <div className="navbar-header">
                        <a className="navbar-brand">
                            <span className="glyphicon glyphicon-search"></span>
                            &nbsp;
                            物流寻宝系统
                        </a>
                    </div>
                    <nav className="navbar-collapse collapse">
                        <ul className="nav navbar-nav">
                            <li className={this.getActive('shopcost')}>
                                <Link to="pre-shopcost" params={{widget: 'shopcost', shopid: -1}}>商户成本度量</Link>
                            </li>
                            <li className={this.getActive('shopareas')}>
                                <Link to="pre-shopareas" params={{widget: 'shopareas', brand: -1}}>商户配送范围</Link>
                            </li>
                            <li className={this.getActive('userwaiting')}>
                                <Link to="pre-userwait" params={{widget: 'userwaiting', brand: -1}}>等待用户时间</Link>
                            </li>
                        </ul>
                        <div className="nav navbar-nav navbar-right">
                            <div className="form-group ">
                                <a 
                                    data-node="shutdownBtn" title="退出系统"
                                    className="shutdown-btn glyphicon glyphicon-off" 
                                    href="javascript:;"
                                    onClick={this.logout}
                                ></a>
                            </div>
                        </div>
                    </nav>
                </div>
            </header>
        );
    }

    logout = () => {
        var pass = [
            "waimai_logistics_username",
            "waimai_logistics_token",
            "wmdispatcher_aoiname",
            "wmdispatcher_aoiid",
            "wmdispatcher_cityid",
            'waimai_logistics_spt'
        ];
        for (var i in pass) {
            this.deleteCookie(pass[i]);
        }
        location.href = "/logistics/userlogin#redirect_url=/wlwine/wlwine"
    }

    deleteCookie(name) {
        var now = new Date();
        now.setDate(now.getDate() - 1000);
        var str = name + '= ;expires=' + now.toGMTString();
        document.cookie = str;
        var str1 = str + ';path=/';
        document.cookie = str1;
        var str2 = str + ';path=/logistics';
        document.cookie = str2;
    }
}

export default Header;